---
path: "/자바스크립트 요점 정리 - REST API/"
category: "자바스크립트"
tags: ["자바스크립트"]
title: "자바스크립트 요점 정리 - REST API"
date: "2021-06-04T01:00:00.000Z"
summary: "자바스크립트 요점 정리 - REST API 파트"
images: ["images/js.png"]
---

> 자바스크립트 요점 정리 - REST API 공부 후 정리 자료입니다. 정확하지 않을 수 있으니 꼭 다시 책이나 자료를 참고하여 공부하세요

# REST API

---

## 1) REST API
---

#### (1) REST

* HTTP를 기반으로 클라이언트가 서버의 리소스에 접근하는 방식을 규정한 아키텍쳐

#### (2) REST API

* REST를 기반으로 서비스 API를 구현한 것

#### (3) REST API의 구성

* 자원, 행위, 표현의 3가지 요소로 구성

| 구성 요소             | 내용                           | 표현 방법        |
| --------------------- | ------------------------------ | ---------------- |
| 자원(resource)        | 자원                           | URI(엔드포인트)  |
| 행위(verb)            | 자원에 대한 행위               | HTTP 요청 메서드 |
| 표현(representations) | 자원에 대한 행위의 구체적 내용 | 페이로드         |

* `RESTful` :  _REST API의 설계의도를 명확하게 지켜주는 것_

* HTTP URI를 통해 자원을 표시하고 HTTP Method를 통해 자원에 대한 처리를 표현
* HTTP를 사용하기 때문에 HTTP의 특성을 그대로 반영하고 별도의 인프라 구축이 필요없음
* URI로 접근가능하고 내용이 JSON,XML 등으로 표현된 자원에 대한 행위를 HTTP Method로 정의
* 동사보단 명사를 위주 (ex 슬래시를 통해 계층관계를 표시, 숫자는 id를 나타냄 )

##### (1) 장점

- 검색엔진에 최대한 많은 페이지가 인덱싱되기를 원하는 경우 REST로 설계하고 html을 서버사이드 렌더링하여 sitemap을 형성하는 것이 쉬움
- API 명세서를 읽지 않고도 요청을 알아보기 쉬움

##### (2) 단점

- 공식화된 레퍼런스가 없기 때문에, 사람마다 다르게 해석하여 사용할 수도 있음
- 특정 클라이언트에서는 HTTP Method나 상태코드 중에 사용할 수 없는 것들이 있음
- 실제 API를 개발할 때 REST로 디자인하면 굉장히 복잡한 비즈니스가 있음

##### (3) HATEOAS

* 동적인 API를 제공할 수 있음(모든 관련된 동작을 URI를 통해 알려줌) 
* 클라이언트가 API의 변화에 일일이 대응하지 않아도 됨



## 2) REST API 설계 원칙
---
#### 1) 원칙

* URI는 리소스를 표현하는데 집중
* 행위에 대한 정의는 HTTP 요청 메서드를 통해 함

#### 2) HTTP 요청 메서드

| HTTP 요청 메서드 | 종류          | 목적                  | 페이로드 | CRUD |
| ---------------- | ------------- | --------------------- | -------- | ---- |
| GET              | index/retrive | 모든/특정 리소스 취득 | X        | R    |
| POST             | create        | 리소스 생성           | O        | C    |
| PUT              | replace       | 리소스의 전체 교체    | O        | CU   |
| PATCH            | modify        | 리소스의 일부 수정    | O        | U    |
| DELETE           | delete        | 모든/특정 리소스 삭제 | X        | D    |

##### 1) GET 

* 서버에 존재하는 데이터를 요청하는 것 
* 요청된 자원을 수정할 때, 자원내 필드를 전체 수정할 때 사용 (만약 일부만 전달할 경우, 그외 필드들은 NULL or 초기값 처리).
* Http Request Message의 Header 부분의 URL에 담겨서 전송되며, BODY는 비어있는 상태 URL에 ?뒤에 데이터를 가져오기 위한 조건이 포함
* URL에 조건이 포함되었기 때문에 데이터의 제한이 존재하며, URL에 노출되기 때문에 보안의 위험 존재

##### 2) POST 

* 서버에 데이터를 생성하는 것을 요청
* Http Request Message의 BODY 부분에 클라이언트의 요청을 처리하기 위한 데이터가 존재
* URL에 노출되지 않기 때문에 보안의 위험이 존재하지 않으며 보내는 데이터의 제한이 없음

##### 3) PUT  

* 서버에 존재하는 데이터를 수정하거나 존재하지 않으면 생성

##### 4) DELETE 

* 서버에 데이터를 제거할 것을 요청. 존재하지 않아도 동일하게 동작

##### 5) PATCH

* 서버에 존재하는 데이터를 일부 수정



#### 3) GET과 POST의 차이점

##### (1) GET

* 서버에 존재하는 정보를 요청
* 이 때 반환되는 정보는 정보 자체가 아니라 정보의 표현
* Request Body는 입력하지 않는 것이 일반적이며, 레거시 시스템의 경우 요청을 받아들이지 않을 수 있음
* 캐싱을 수행하기 때문에 캐싱되지 않는 요청은 GET 요청이 맞지 않을 수 있음

##### (2) POST

* 서버에 정보를 생성하는 것을 요청
* 예전 HTTP 통신은 POST 요청으로 데이터 삭제, 수정도 form 요청으로 같이 수행 
* POST 요청은 서버의 상태를 변경시키기 때문에 멱등성이 유지되지 않음
* Request Body에 요청하는 데이터를 담아 전송

##### (3) CORS

* 서로 다른 도메인간에 자원을 공유하는 것, 도메인 또는 포트가 다른 서버의 자원을 요청하면 발생하는 문제 
* 웹 프론트 측에서 request header에 CORS 관련 옵션을 넣어주고 서버에서는 해당 프론트 요청을 허용
* 대부분의 브라우저에서는 이를 기본적으로 차단하며 서버측에서 헤더를 통해서 사용가능한 자원을 알려줌
* preflight request는 실제 요청을 보내도 안전한지 판단하기 위해 사전에 보내는 요청
* OPTIONS 메서드로 요청하며 CORS를 허용하는지 확인
* CORS가 허용된 웹서버라면 사용 가능한 리소스를 헤더에 담아 응답
