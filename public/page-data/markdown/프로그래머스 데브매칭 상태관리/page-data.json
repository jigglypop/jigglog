{"componentChunkName":"component---src-templates-markdown-tsx","path":"/markdown/프로그래머스 데브매칭 상태관리/","result":{"data":{"site":{"siteMetadata":{"title":"jigglog","author":"JIGGLYPOP","homepage":"https://jigglog.netlify.app"}},"post":{"id":"331f1309-b303-539c-a346-9107066bd5fd","html":"<h1>1. index.html</h1>\n<pre><code class=\"language-html\">&#x3C;!DOCTYPE html>\n&#x3C;html lang=\"en\">\n    &#x3C;head>\n        &#x3C;meta charset=\"UTF-8\" />\n        &#x3C;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n        &#x3C;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\" />\n        &#x3C;link rel=\"stylesheet\" href=\"./src/style.css\">\n    &#x3C;/head>\n    &#x3C;body>\n        &#x3C;main id=\"App\">&#x3C;/main>\n        &#x3C;script type=\"module\" src=\"src/main.js\">&#x3C;/script>\n    &#x3C;/body>\n&#x3C;/html>\n</code></pre>\n<h1>2. main.js</h1>\n<pre><code class=\"language-javascript\">import App from \"./App.js\";\n\nnew App(document.querySelector(\"#App\"));\n</code></pre>\n<h1>3. App</h1>\n<pre><code class=\"language-javascript\">import Main from \"./components/Main.js\";\n\nexport default class App {\n  $target = null;\n\n  constructor($target) {\n    this.$target = $target;\n    new Main({\n      $target,\n    });\n  }\n\n  setState(data) {\n    this.data = data;\n  }\n}\n</code></pre>\n<h2>4. style.css</h2>\n<pre><code class=\"language-css\">html {\n  box-sizing: border-box;\n}\n\n*,\n*:before,\n*:after {\n  box-sizing: inherit;\n}\n\n.spinner-wrapper {\n  position: fixed;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  color: white;\n  left: 0;\n  top: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n\n.isvisible {\n  display: none;\n}\n\n.header {\n  position: fixed;\n  height: 50px;\n  width: 100%;\n  left: 0;\n  top: 0;\n  display: flex;\n}\n.header h4 {\n  margin: 10px;\n  cursor: pointer;\n}\n\n#app {\n  margin-top: 100px;\n}\n</code></pre>\n<h2>5. Main</h2>\n<pre><code class=\"language-javascript\">import Component from \"./Component.js\";\nimport Count from \"./count.js\";\nimport List from \"./list.js\";\nimport store from \"../store/index.js\";\n\nexport default class Main extends Component {\n  constructor({ $target }) {\n    super({\n      store,\n      name: \"main\",\n      $target,\n    });\n    new Count({\n      $target: this.$target,\n    });\n    new List({\n      $target: this.$target,\n    });\n  }\n  render() {\n    this.$outer.innerHTML = `\n      &#x3C;form>\n        &#x3C;div class=\"boilerform\">\n          &#x3C;input type=\"text\" class=\"input\" autocomplete=\"off\" />\n          &#x3C;button>추가&#x3C;/button>\n        &#x3C;/div>\n      &#x3C;/form>\n    `;\n    const formEl = this.$outer.querySelector(\"form\");\n    const inputEl = formEl.querySelector(\".input\");\n    formEl.addEventListener(\"submit\", (e) => {\n      e.preventDefault();\n      let value = inputEl.value.trim();\n      if (value.length) {\n        store.commit(\"addItem\", value);\n        inputEl.value = \"\";\n        inputEl.focus();\n      }\n    });\n  }\n}\n</code></pre>\n<h2>6. list.js</h2>\n<pre><code class=\"language-javascript\">import Component from \"./component.js\";\nimport store from \"../store/index.js\";\n\nexport default class List extends Component {\n  constructor({ $target }) {\n    super({\n      store,\n      name: \"items\",\n      $target,\n    });\n  }\n\n  render() {\n    if (store.state.items.length === 0) {\n      this.$outer.innerHTML = `&#x3C;p class=\"no-items\">리스트 없음&#x3C;/p>`;\n      return;\n    }\n    this.$outer.innerHTML = `\n        &#x3C;ul>${store.state.items\n          .map((item) => {\n            return `&#x3C;li>${item}&#x3C;button>×&#x3C;/button>&#x3C;/li>`;\n          })\n          .join(\"\")}&#x3C;/ul>\n    `;\n\n    this.$outer.querySelectorAll(\"button\").forEach((button, index) => {\n      button.addEventListener(\"click\", () => {\n        store.commit(\"clearItem\", { index });\n      });\n    });\n  }\n}\n</code></pre>\n<h2>8. Component.js</h2>\n<pre><code class=\"language-javascript\">export default class Component {\n  $target = null;\n  $outer = null;\n\n  constructor(props = {}) {\n    let self = this;\n    this.$outer = document.createElement(\"div\");\n    this.$outer.className = `${props.name}`;\n    props.$target.appendChild(this.$outer);\n    this.$target = props.$target;\n    props.store.events.subscribe(\"stateChange\", () => self.render());\n    self.render();\n  }\n}\n</code></pre>\n<h2>9. store/index.js</h2>\n<pre><code class=\"language-javascript\">import mutations from \"./mutations.js\";\nimport state from \"./state.js\";\nimport Store from \"./store.js\";\n\nexport default new Store({\n  mutations,\n  state,\n});\n</code></pre>\n<h2>10. store/mutations.js</h2>\n<pre><code class=\"language-javascript\">export default {\n  addItem(state, payload) {\n    state.items.push(payload);\n    return state;\n  },\n  clearItem(state, payload) {\n    state.items.splice(payload.index, 1);\n    return state;\n  },\n};\n</code></pre>\n<h2>11. store/pubsub.js</h2>\n<pre><code class=\"language-javascript\">export default class PubSub {\n  events = {};\n  subscribe(event, callback) {\n    if (!this.events.hasOwnProperty(event)) this.events[event] = [];\n    return this.events[event].push(callback);\n  }\n\n  publish(event, data = {}) {\n    if (!this.events.hasOwnProperty(event)) return [];\n    return this.events[event].map((callback) => callback(data));\n  }\n}\n</code></pre>\n<h2>12. store/state.js</h2>\n<pre><code class=\"language-java\">export default {\n  items: [\"예시 1\", \"예시 2\"],\n};\n</code></pre>\n<h2>13. store/store.js</h2>\n<pre><code class=\"language-javascript\">import PubSub from \"./pubsub.js\";\n\nexport default class Store {\n  mutations = {};\n  state = {};\n  events = null;\n\n  constructor(params) {\n    this.events = new PubSub();\n    this.mutations = params.mutations;\n\n    this.state = new Proxy(params.state || {}, {\n      set: (state, key, value) => {\n        state[key] = value;\n        console.log(`현재 상태: ${key}: ${value}`);\n        this.events.publish(\"stateChange\", this.state);\n        return true;\n      },\n    });\n  }\n\n  commit(name, payload) {\n    if (typeof this.mutations[name] !== \"function\") return false;\n    this.state = Object.assign(\n      this.state,\n      this.mutations[name](this.state, payload)\n    );\n    return true;\n  }\n}\n</code></pre>","tableOfContents":"<ul>\n<li><a href=\"/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4%20%EB%8D%B0%EB%B8%8C%EB%A7%A4%EC%B9%AD%20%EC%83%81%ED%83%9C%EA%B4%80%EB%A6%AC/#1-indexhtml\">1. index.html</a></li>\n<li><a href=\"/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4%20%EB%8D%B0%EB%B8%8C%EB%A7%A4%EC%B9%AD%20%EC%83%81%ED%83%9C%EA%B4%80%EB%A6%AC/#2-mainjs\">2. main.js</a></li>\n<li>\n<p><a href=\"/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4%20%EB%8D%B0%EB%B8%8C%EB%A7%A4%EC%B9%AD%20%EC%83%81%ED%83%9C%EA%B4%80%EB%A6%AC/#3-app\">3. App</a></p>\n<ul>\n<li><a href=\"/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4%20%EB%8D%B0%EB%B8%8C%EB%A7%A4%EC%B9%AD%20%EC%83%81%ED%83%9C%EA%B4%80%EB%A6%AC/#4-stylecss\">4. style.css</a></li>\n<li><a href=\"/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4%20%EB%8D%B0%EB%B8%8C%EB%A7%A4%EC%B9%AD%20%EC%83%81%ED%83%9C%EA%B4%80%EB%A6%AC/#5-main\">5. Main</a></li>\n<li><a href=\"/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4%20%EB%8D%B0%EB%B8%8C%EB%A7%A4%EC%B9%AD%20%EC%83%81%ED%83%9C%EA%B4%80%EB%A6%AC/#6-listjs\">6. list.js</a></li>\n<li><a href=\"/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4%20%EB%8D%B0%EB%B8%8C%EB%A7%A4%EC%B9%AD%20%EC%83%81%ED%83%9C%EA%B4%80%EB%A6%AC/#8-componentjs\">8. Component.js</a></li>\n<li><a href=\"/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4%20%EB%8D%B0%EB%B8%8C%EB%A7%A4%EC%B9%AD%20%EC%83%81%ED%83%9C%EA%B4%80%EB%A6%AC/#9-storeindexjs\">9. store/index.js</a></li>\n<li><a href=\"/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4%20%EB%8D%B0%EB%B8%8C%EB%A7%A4%EC%B9%AD%20%EC%83%81%ED%83%9C%EA%B4%80%EB%A6%AC/#10-storemutationsjs\">10. store/mutations.js</a></li>\n<li><a href=\"/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4%20%EB%8D%B0%EB%B8%8C%EB%A7%A4%EC%B9%AD%20%EC%83%81%ED%83%9C%EA%B4%80%EB%A6%AC/#11-storepubsubjs\">11. store/pubsub.js</a></li>\n<li><a href=\"/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4%20%EB%8D%B0%EB%B8%8C%EB%A7%A4%EC%B9%AD%20%EC%83%81%ED%83%9C%EA%B4%80%EB%A6%AC/#12-storestatejs\">12. store/state.js</a></li>\n<li><a href=\"/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4%20%EB%8D%B0%EB%B8%8C%EB%A7%A4%EC%B9%AD%20%EC%83%81%ED%83%9C%EA%B4%80%EB%A6%AC/#13-storestorejs\">13. store/store.js</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"프로그래머스 데브매칭 상태관리","path":"/프로그래머스 데브매칭 상태관리/","images":["images/pg.jpg"],"category":"프로그래머스 데브매칭","tags":["프로그래머스 데브매칭","상태관리"],"date":"2021-03-01T12:23:00.000Z","components":null,"tweets":null,"summary":"프로그래머스 데브매칭 상태관리입니다."}}},"pageContext":{"match":"/프로그래머스 데브매칭 상태관리/"}}}